# Maintainer: Versus Void
pkgname=axtls
pkgver=2.1.4
pkgrel=1
pkgdesc="Highly configurable client/server TLSv1.2 library"
arch=(x86_64 i686)
url="http://axtls.sourceforge.net/"
license=('BSD')
groups=()
makedepends=()
source=("http://downloads.sourceforge.net/sourceforge/${pkgname}/axTLS-${pkgver}.tar.gz"
        "config.h"
        ".config"
	   )
#noextract=()
sha256sums=("e53dd20e2b619349bc48b631176a38742ea600333fd0349df83c6366b7be05bb"
			"b9f276b4b04daa3e36cb3fa71771796327904fa2c5e55d205d3148cae8bf17d5"
			"ae1d08b8b3bcc4ab9dccb62902f2c5e35d435eba3f9fe81da523fe3a2bc87b53"
		   )

prepare() {
	cd "axtls-code"
	cp "$srcdir/config.h" config/
	cp "$srcdir/.config" config/
	sed -i '/rm $(PREFIX)\/include\/axTLS\/os_port.h/d' Makefile
}

build() {
	cd "axtls-code"
	make
}

package() {
	cd "axtls-code"
	mkdir -p "$pkgdir/usr"
	sed "s#PREFIX=.*#PREFIX=\"$pkgdir/usr\"#g" -i config/.config
	make install
}
